#include<stdio.h>
#include<unistd.h>
#include<dirent.h>
#include<sys/types.h>
#include<stdlib.h>
#include<sys/stat.h>

void afficher_contenu(struct stat *info)
{
	if(S_ISBLK(info->st_mode))
		fprintf(stdout," fichier: block, <permission> : ");
	else if (S_ISCHR(info->st_mode))
		fprintf(stdout," fichier: caractere, <permission> :  ");
	else if (S_ISDIR(info->st_mode))
		fprintf(stdout," fichier: repertoire, <permission> : ");
	else if (S_ISREG(info->st_mode))
		fprintf(stdout," fichier: regulier, <permission> : ");
	else if (S_ISLNK(info->st_mode))
		fprintf(stdout," fichier: lien, <permission> : ");
	else if (S_ISFIFO(info->st_mode))
		fprintf(stdout,"fichier: fifo, <permission> : ");
	else if(S_ISSOCK(info->st_mode))
		fprintf(stdout,"fichier: socket, <permission> :  ");
	fprintf(stdout, " [utilisateur] :");
	fprintf(stdout, info->st_mode & S_IRUSR ? "r" :"-");
	fprintf(stdout, info->st_mode & S_IWUSR ? "w" :"-");
	fprintf(stdout, info->st_mode & S_IXUSR ? "x" :"-");
	fprintf(stdout, " [groupe] :");
	fprintf(stdout, info->st_mode & S_IRGRP ? "r" :"-");
	fprintf(stdout, info->st_mode & S_IWGRP ? "w" :"-");
	fprintf(stdout, info->st_mode & S_IXGRP ? "x" :"-");
	fprintf(stdout, " [other] :");
	fprintf(stdout, info->st_mode & S_IROTH ? "r" :"-");
	fprintf(stdout, info->st_mode & S_IWOTH ? "w" :"-");
	fprintf(stdout, info->st_mode & S_IXOTH ? "x" :"-");
	fprintf(stdout, "\n");
}

int main(void)
{
	struct stat etat_fichier;
	char fichier[512];//un fichier absolue
	
	
	printf("entrer le nom absolu du fichier :\n");
	scanf("%s",fichier);
	stat(fichier,&etat_fichier);
	afficher_contenu( &etat_fichier);



	return 0;
}


